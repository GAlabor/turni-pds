/* === STYLE (pulito) === */

/* ROOT VARS */
:root{
  --iosBlue:#1976d2; --iosBlue-600:#1565c0;
  --bg:#f3f5f8; --card:#ffffff; --gridBorder:#d9dee6;
  --text:#0b1320; --muted:#7a8595;
  --sunday:#c62828; --today:#cfe3ff;
  --T-GL:#c68bcf; --T-AP:#a47ac9;
  --fieldH:44px;

  --bar-h: 60px; --seam: 20px; --blue-rgb: 25,118,210;
  --cx: 50%; --cy: 50%; --glow-x: 50%;
  --core-a1: 0.94; --core-a2: 0.82; --core-a3: 0.66; --core-a4: 0.48; --core-a5: 0.34;
  --mid-a1: 0.18; --mid-a2: 0.12; --mid-a3: 0.08;
  --far-a1: 0.08; --far-a2: 0.05; --far-a3: 0.024;
  --tail: color-mix(in oklch, rgb(var(--blue-rgb)) 0%, var(--bg) 100%);

  /* Tabbar + icons */
  --tabW: 56px; --tabH: 46px; --tabIcon: 22px;
  --tabColor: #b7bcc6; --tabColorActive: #e3e7ec;
  --tabHoverBg: rgba(255,255,255,.10); --tabActiveBg: rgba(255,255,255,.14);

  /* Action icons */
  --actBtn:44px; --actIcon:24px; --actStroke:2.25px;
  --actColor:#bcc3cc; --actColorHi:#e6e9ee;
}

/* BASE */
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,"Helvetica Neue",Arial}

/* TOPBAR (glow) */
.topbar{
  position: sticky; top: 0; z-index: 20;
  display: flex; align-items: center; gap: 10px; justify-content: center;
  padding: 10px 12px; color: #fff; background: transparent;
  will-change: transform; transform: translateZ(0); backface-visibility: hidden; contain: paint; overflow: visible;
  box-shadow: inset 0 -1px 0 var(--bg), inset 0  1px 0 var(--bg);
}
.topbar::before{
  content: ""; position: absolute; left:0; right:0; top:0;
  height: calc(var(--bar-h) + var(--seam) + 2px); pointer-events:none;
  background:
    linear-gradient(to right,
      var(--bg) 0%,
      color-mix(in oklch, var(--bg) 85%, transparent) 8%,
      transparent 18%, transparent 82%,
      color-mix(in oklch, var(--bg) 85%, transparent) 92%, var(--bg) 100%),
    radial-gradient(ellipse 85% 160% at var(--cx) var(--cy),
      rgba(var(--blue-rgb), var(--far-a1)) 0%,
      rgba(var(--blue-rgb), var(--far-a2)) 32%,
      rgba(var(--blue-rgb), var(--far-a3)) 62%,
      var(--tail) 100%),
    radial-gradient(ellipse 60% 130% at var(--cx) var(--cy),
      rgba(var(--blue-rgb), var(--mid-a1)) 0%,
      rgba(var(--blue-rgb), var(--mid-a2)) 26%,
      rgba(var(--blue-rgb), var(--mid-a3)) 56%,
      var(--tail) 100%),
    radial-gradient(ellipse var(--glow-x) 120% at var(--cx) var(--cy),
      rgba(var(--blue-rgb), 1) 0%,
      rgba(var(--blue-rgb), var(--core-a1)) 8%,
      rgba(var(--blue-rgb), var(--core-a2)) 14%,
      rgba(var(--blue-rgb), var(--core-a3)) 22%,
      rgba(var(--blue-rgb), var(--core-a4)) 32%,
      rgba(var(--blue-rgb), var(--core-a5)) 44%,
      rgba(var(--blue-rgb), 0.12) 62%,
      rgba(var(--blue-rgb), 0.06) 78%,
      var(--tail) 100%);
  -webkit-mask-image: linear-gradient(to bottom,#000 0,#000 var(--bar-h),rgba(0,0,0,0.65) calc(var(--bar-h) + var(--seam)*.35),rgba(0,0,0,0.28) calc(var(--bar-h)+var(--seam)*.75),transparent calc(var(--bar-h)+var(--seam)));
          mask-image: linear-gradient(to bottom,#000 0,#000 var(--bar-h),rgba(0,0,0,0.65) calc(var(--bar-h) + var(--seam)*.35),rgba(0,0,0,0.28) calc(var(--bar-h)+var(--seam)*.75),transparent calc(var(--bar-h)+var(--seam)));
}
.brandmark{display:flex;align-items:center;justify-content:center;line-height:0}
.brandmark svg{display:block;height:24px;width:auto;transform: scale(var(--wmScale, 1.80));transform-origin: center;}

/* LAYOUT */
main{ max-width:760px; margin:8px auto 90px; padding:0 10px; }
.monthbar{ display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:8px; margin:10px 0 6px; }
.monthbar .title{ text-align:center }

/* Nav buttons */
.navbtn{
  appearance:none;border:0;background:transparent;color:var(--actColor);
  font-size:22px;line-height:1;cursor:pointer;padding:6px 8px;border-radius:10px;
  -webkit-tap-highlight-color:transparent;
  transition: background .18s ease, color .18s ease, transform .06s ease;
}
.navbtn:hover{ background:var(--actHover); color:var(--actColorHi); transform:translateY(-1px); }
.navbtn:active{ background:var(--actActive); color:var(--actColorHi); transform:translateY(1px); }

.weekhead{ display:grid; grid-template-columns:repeat(7,1fr); gap:3px; padding:3px 3px 0; }
html, body { height: 100%; }
body.no-scroll { overflow: hidden; }
body.no-scroll main{ margin-bottom: calc(var(--tabH) + 12px); overflow: clip; }
.view{ display:none } .view.active{ display:block }

/* CALENDAR GRID */
.grid{
  display:grid; grid-template-columns:repeat(7,1fr);
  grid-auto-rows:minmax(62px,1fr); gap:3px; padding:3px;
}
.cell{ position:relative; min-height:84px; border-radius:12px; display:flex; align-items:center; justify-content:center; overflow:hidden; }
.cell::before{ content:""; position:absolute; inset:0; border-radius:inherit; background:transparent; transition:background .18s ease; pointer-events:none; }
.num{ position:absolute; left:8px; top:6px; font-size:18px; color:var(--muted); font-weight:800; z-index:1; }
.sun .num{ color:var(--sunday); }
.sigla{ font-size:23px; font-weight:400; letter-spacing:.5px; opacity:.95; position:relative; top:8px; z-index:1; }
.T-GL{ color:var(--T-GL); } .T-AP{ color:var(--T-AP); }
.cell:hover::before{ background:var(--actHover); }
.cell:active::before{ background:var(--actActive); }
.cell.selected::before{ background:var(--actActive); }

@media(max-width:560px){
  .grid{ grid-auto-rows:minmax(48px,1fr); }
  .cell{ min-height:auto; padding:4px 0; }
  .num{ font-size:15px; font-weight:800; top:4px; color:var(--text); line-height:1; -webkit-text-stroke:.15px transparent; }
  .sigla{ font-size:18px; top:9px; opacity:.9; }
}

/* SETTINGS */
.settingsCard{background:var(--card);border:1px solid var(--gridBorder);border-radius:10px;padding:14px;margin-top:10px}
.settingsRow{display:grid;grid-template-columns:160px 1fr;gap:8px;align-items:center;margin:8px 0}
.settingsRow label{font-weight:600;color:var(--muted)}
.settingsRow input,.settingsRow select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--gridBorder);background:var(--card);color:var(--text);height:var(--fieldH)}

/* TABBAR */
.tabbar{
  position:fixed; bottom:0; left:0; right:0;
  background:var(--card); border-top:1px solid var(--gridBorder);
  display:flex; justify-content:space-around; gap:10px; padding:8px 10px; z-index:10;
}
.tab{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
  width:var(--tabW); height:var(--tabH); border-radius:12px; background:transparent;
  color:var(--tabColor); font-size:12px; cursor:pointer; -webkit-tap-highlight-color:transparent;
  transition: background-color .18s ease, color .18s ease, transform .06s ease;
}
.tab svg{ width:var(--tabIcon); height:var(--tabIcon); display:block; fill:none; stroke:currentColor; stroke-width:2.25; stroke-linecap:round; stroke-linejoin:round; }
.tab.active{ color:var(--tabColorActive); background:var(--tabActiveBg); font-weight:700; }
.tab:hover{ background:var(--tabHoverBg); color:var(--tabColorActive); transform:translateY(-1px); }
.tab:active{ background:var(--tabActiveBg); transform:translateY(1px); }
.tab span{ line-height:1; }
@media (max-width:560px){ :root{ --tabW:48px; --tabH:40px; --tabIcon:18px; } }

/* FORMS */
.thin-sep{height:0;border-top:1px solid var(--gridBorder);margin:6px 0}
.iconbtn{width:var(--fieldH);height:var(--fieldH);border-radius:8px;padding:0;font-size:20px;display:flex;align-items:center;justify-content:center;border:0}
.iconbtn-primary{background:var(--iosBlue);color:#fff}
.iconbtn-danger{background:#b42325;color:#fff}
.iconbtn:active{transform:translateY(1px)}
@media(max-width:560px){ .settingsRow{grid-template-columns:120px 1fr} }

/* Hide topbar in settings when requested */
.hide-topbar .topbar{ display: none !important; }
.hide-topbar main{ margin-top: 8px; }

/* COLOR PICKER */
.colorCell{ display:flex; align-items:center; justify-content:center; }
.colorInput{
  -webkit-appearance:none; appearance:none;
  width:var(--fieldH); height:var(--fieldH);
  border:1px solid var(--gridBorder); border-radius:8px; background:transparent;
}
.colorInput::-webkit-color-swatch-wrapper{ padding:0; }
.colorInput::-webkit-color-swatch{ border:none; border-radius:6px; }
.colorInput::-moz-color-swatch{ border:none; border-radius:6px; }
@media (max-width:560px){ :root{ --fieldH:40px; } }

/* GRID TURNI */
.turni-grid{ grid-template-columns: 1fr 64px 1.05fr 52px 44px !important; align-items:center; }
.siglaInput{ width:100%; text-transform:uppercase; text-align:center; letter-spacing:.5px; }
@media (max-width:560px){
  .turni-grid{ grid-template-columns: 1fr 60px 0.85fr 46px 44px !important; }
}

/* DATE FIELD */
.settingsRow input[type="date"]{
  width:95%; min-width:0; font-size:1rem; height:38px; line-height:38px;
  text-align:center; margin:0 auto; display:block; border-radius:8px;
}
@media (max-width:560px){
  .settingsRow input[type="date"]{ width:92%; font-size:1.05rem; height:36px; line-height:36px; }
}

/* MULTILINE SCHEDULE */
.orarioArea{
  display:block; width:100%; height:calc(var(--fieldH) + 2px);
  padding:6px 8px; resize:none; line-height:1.05; font-size:0.86rem;
  border:1px solid var(--gridBorder); border-radius:8px; background:var(--card); color:var(--text);
  white-space:pre;
}
@media (max-width:560px){ .orarioArea{ font-size:0.8rem; height:calc(var(--fieldH)); } }

/* THEME: Moderno 2025 — Neo-Glass Soft */
:root{
  --bg:
    radial-gradient(1100px 640px at 50% -12%, rgba(56,124,255,.22) 0%, rgba(20,28,46,0) 55%),
    linear-gradient(180deg, #0a0f14 0%, #0a0d13 45%, #07090d 100%);
  --surface-glass: rgba(18,22,28,.55);
  --surface-opaque:#0f141b;
  --cell-bg:#10161e;
  --gridBorder: rgba(255,255,255,.08);
  --border-soft: rgba(255,255,255,.06);
  --text:#f2f4f7; --muted:#a6b0bb;
  --blue-rgb: 56,124,255; --today: rgba(56,124,255,.18); --sunday:#e04d4d;
  --actHover:rgba(255,255,255,.08); --actActive:rgba(255,255,255,.14);
  --tabColor:#b7bcc6; --tabColorActive:#eef2f7; --tabHoverBg:rgba(255,255,255,.08); --tabActiveBg:rgba(255,255,255,.14);
}
body{ background: var(--bg) fixed !important; color: var(--text); }
.topbar, .tabbar{
  background: var(--surface-glass) !important;
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  border: 1px solid var(--border-soft);
  box-shadow: 0 8px 26px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
}
.settingsCard{
  background: var(--surface-opaque) !important;
  border: 1px solid var(--gridBorder) !important;
  box-shadow: 0 10px 28px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
}
.cell{
  background: var(--cell-bg) !important;
  border: 1px solid var(--border-soft) !important;
  box-shadow: 0 1px 0 rgba(255,255,255,.02) inset;
}
.cell::before{ transition: background .18s ease, box-shadow .18s ease; }
.cell:hover::before{ box-shadow: inset 0 0 0 1px rgba(255,255,255,.08); }
.today::before {
  content: ""; position: absolute; inset: 0; border-radius: inherit;
  background: color-mix(in oklch, var(--actHover) 55%, white 25%);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.15),
    0 0 12px 4px rgba(var(--blue-rgb),.20),
    0 0 20px 8px rgba(var(--blue-rgb),.10);
  pointer-events: none;
}
.weekhead div{
  background: rgba(56,124,255,.22) !important; border: 1px solid rgba(56,124,255,.34) !important;
  color:#fff; text-align:center; padding:8px 0; font-weight:700; border-radius:10px; letter-spacing:.03em; font-size:.82rem;
}
.cell:not(.sun) .num{ color: rgba(240,244,248,.86); }
.topbar{ box-shadow: inset 0 -1px 0 rgba(255,255,255,.04), inset 0  1px 0 rgba(0,0,0,.55); }
.brandmark svg path{ filter: drop-shadow(0 1px 0 rgba(255,255,255,.07)) drop-shadow(0 10px 24px rgba(56,124,255,.20)); }
.settingsRow input, .settingsRow select, .orarioArea{
  background: #0e141b !important; border: 1px solid var(--gridBorder) !important; color: var(--text) !important;
}

/* === Version badge responsive === */
.version-label {
  position: fixed;
  bottom: 0;              /* <-- invece di 6px */
  left: 10px;
  transform: translateY(-4px); /* piccolo margine visivo verso l’alto */
  font-weight: 600;
  letter-spacing: .2px;
  color: var(--muted, #bbb);
  opacity: .75;
  pointer-events: none;
  user-select: none;
  z-index: 9999;
  font-size: 14px;
}

/* schermi larghi: un filo più grande */
@media (min-width: 1200px) {
  .version-label { font-size: 15px; }
}

/* webapp installata (PWA standalone): più compatto */
@media (display-mode: standalone) {
  .version-label { font-size: 11px; opacity: .65; }
}

/* telefoni/tablet in browser: riduci un po' */
@media (max-width: 600px) {
  .version-label { font-size: 12px; }
}

