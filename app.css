/* === TYPE (iOS-like ovunque) === */
:root{
  --font-ui: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display",
             "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui, sans-serif;

  /* Palette su blu istituzionale con sfondo fisso */
--bg:
  radial-gradient(1400px 900px at 80% -10%, rgba(118,179,255,.10) 0%, rgba(255,255,255,0) 65%),
  linear-gradient(180deg, #1a4fbf 0%, #1a5acb 38%, #1649a8 68%, #133b88 100%);


  /* superfici translucide */
  --pill-bg: rgba(255,255,255,.12);
  --pill-brd: rgba(255,255,255,.18);

  /* testi */
  --text: #f8fbff;
  --muted: #d2d8e6;


  /* calendario */
  --sunday:#ff6a6a;
  --cell-brd: rgba(255,255,255,.18);
  --cell-hov: rgba(255,255,255,.14);
  --today-brd: rgba(255,255,255,.82);
  --today-bg:  rgba(255,255,255,.10);

  /* turni speciali */
  --T-GL:#3ccdd0; --T-AP:#ff7dbf;

  /* dimensioni */
  --fieldH:44px;

  /* Tabbar + icons (flex) */
  --tabH: 40px;
  --tabIcon: 26px;
  --tabMaxW: 90px;      /* larghezza massima colonna tab */
  --tabColor:#e2ebff;
  --tabColorActive:#ffffff;

  /* frecce mese (bolla tonda) */
  --navBtnSize: 44px;   /* desktop default */

  /* focus */
  --focus-ring: 0 0 0 2px rgba(74,170,240,.45);

  /* feedback */
  --lift: -1px;
  --press: 1px;
  --icon-pop: 1.04;
  --active-contrast: 1.1;
  --active-bright: 1.25;
}

/* === BASE === */
*{box-sizing:border-box}
html, body { height: 100%; }
body{
  margin:0;
  background: var(--bg) fixed !important;
  color:var(--text);
  font-family:var(--font-ui);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
body.no-scroll { overflow: hidden; }
main{ max-width:760px; margin:8px auto calc(90px + env(safe-area-inset-bottom)); padding:0 10px; }

/* === TOPBAR uniforme con lo sfondo === */
.topbar {
  position: sticky;
  top: 0;
  z-index: 20;

  display: flex;
  align-items: center;
  justify-content: center;

  height: 46px;
  padding: 10px 12px;

  /* Trasparenza totale */
  background: transparent;

  /* Un minimo di vetro, ma quasi impercettibile */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);

  /* Linea sottilissima che non rompe la fusione */
  border-bottom: 1px solid rgba(255,255,255,0.04);

  /* Ombra super leggera, giusto per distacco naturale */
  box-shadow: 0 1px 2px rgba(0,0,0,0.12);

  color: #fff;
}



.brandmark{display:flex;align-items:center;justify-content:center;line-height:0}
.brandmark svg{
  display:block; height:44px; width:auto;
  shape-rendering:geometricPrecision; text-rendering:optimizeLegibility;
}

/* === HEADER MESE + DOW === */
.monthbar {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 8px;
  margin: 12px 0 10px;
}

.monthbar .title {
  text-align: center;
  font-family: var(--font-ui);
  font-weight: 600;                 /* sotto a .weekhead(700) e .sigla/.num(800) */
  font-size: clamp(18px, 2.8vw, 22px);
  line-height: 1.15;                /* niente “effetto tappo” */
  letter-spacing: 0.03em;           /* tracking coerente, non rigido in px */
  color: rgba(255,255,255,0.96);
  text-shadow: 0 1px 2px rgba(0,0,0,0.28); /* più fine del 1x3 */
}


/* Nav btn: bolla tonda trasparente stile iOS */
.navbtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.35);
  background:transparent;
  color:#fff;

  inline-size: var(--navBtnSize);
  block-size: var(--navBtnSize);
  border-radius:9999px;
  padding:0;

  display:inline-flex;
  align-items:center;
  justify-content:center;

  font-size:20px;
  line-height:1;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;

  transition: background .16s ease, transform .06s ease, box-shadow .16s ease, border-color .16s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.12);
}

/* hover: lieve velatura bianca + lift */
@media (hover:hover){
  .navbtn:hover{
    background: rgba(255,255,255,.12);
    transform: translateY(var(--lift));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 2px 8px rgba(0,0,0,.15);
  }
}

/* click/tap: quasi piatto */
.navbtn:active{
  background: rgba(255,255,255,.08);
  transform: translateY(var(--press));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}

.navbtn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 1px rgba(255,255,255,.25), var(--focus-ring);
  border-color: rgba(255,255,255,.45);
}

.navbtn svg{
  width:18px; height:18px; display:block; stroke-width:2.25;
}


/* Giorni settimana: allineati alla grid */
.weekhead{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;               /* come .grid */
  padding:3px;           /* come .grid */
  margin:6px 0 4px;
}
.weekhead div{
  background: transparent;                      /* come .cell */
  border: 1px solid var(--cell-brd);            /* come .cell */
  color: color-mix(in oklch, #fff 96%, transparent);
  text-align:center;
  padding:10px 0;
  font-weight:700;
  letter-spacing:.025em;
  text-transform:uppercase;
  font-size:.90rem;
  border-radius:14px;                            /* come .cell desktop */
  box-shadow: inset 0 1px 0 rgba(255,255,255,.14); /* come .cell */
}

.view{ display:none } .view.active{ display:block }

/* === GRID === */
.grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  grid-auto-rows:minmax(62px,1fr);
  gap:6px;
  padding:3px;
  position:relative;
}
.grid.anim{ will-change: transform, opacity; }
.slide-out-left{ animation: outLeft .22s ease forwards }
.slide-in-right{ animation: inRight .22s ease forwards }
.slide-out-right{ animation: outRight .22s ease forwards }
.slide-in-left{ animation: inLeft .22s ease forwards }
@keyframes outLeft{ from{transform:translateX(0); opacity:1} to{transform:translateX(-22px); opacity:0} }
@keyframes inRight{ from{transform:translateX(22px); opacity:0} to{transform:translateX(0); opacity:1} }
@keyframes outRight{ from{transform:translateX(0); opacity:1} to{transform:translateX(22px); opacity:0} }
@keyframes inLeft{ from{transform:translateX(-22px); opacity:0} to{transform:translateX(0); opacity:1} }

/* Celle trasparenti con bordo visibile */
.cell{
  position:relative; display:flex; align-items:center; justify-content:center; overflow:hidden;
  background: transparent !important;
  border: 1px solid var(--cell-brd) !important;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.10);
  color:#fff;
  min-height:84px; border-radius:14px;
  cursor:pointer;
  transition: transform .06s ease;
}

/* overlay hover/tap */
.cell::before{
  content:""; position:absolute; inset:0; border-radius:inherit;
  background:transparent; transition:background .14s ease, box-shadow .14s ease, transform .08s ease;
  pointer-events:none;
}

/* micro pulse alla pressione */
.cell::after{
  content:""; position:absolute; inset:-2px; border-radius:inherit;
  background: radial-gradient(120px 120px at 50% 50%, rgba(255,255,255,.12), transparent 60%);
  opacity:0; transform: scale(.96);
  transition: opacity .08s ease, transform .08s ease;
  pointer-events:none;
}

/* hover desktop: velatura + lift + contorno più deciso */
@media (hover:hover){
  .cell:hover{
    transform: translateY(var(--lift));
  }
  .cell:hover::before{
    background: rgba(255,255,255,.10);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.18);

  }
}

/* pressione: feedback immediato */
.cell:active{
  transform: translateY(var(--press));
}
.cell:active::before{
  background: rgba(255,255,255,.10);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.26);
}
.cell:active::after{
  opacity:1; transform: scale(1);
}

/* Celle fuori mese */
.cell.out-month{ opacity: var(--out-opacity, .55); }

/* Focus per celle editabili */
.cell:focus-within{
  outline: none;
  box-shadow: 0 0 0 1px rgba(255,255,255,.22), var(--focus-ring);
}

/* Numeri giorno */
.num{
  position:absolute; left:10px; top:8px; z-index:1;
  font-size:16px; font-weight:800; color:#fff;
  font-variant-numeric: tabular-nums;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* Domeniche: solo NUMERO rosso */
.cell.sun .num{ color: var(--sunday) !important; }

/* Oggi: bordo + bg */
.today{
  border-color: rgba(255,255,255,.65) !important;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.65), inset 0 1px 0 rgba(255,255,255,.12);
}
.today::before{ background: rgba(255,255,255,.08); }

/* === SIGLE === */
.sigla{
  font-family:var(--font-ui);
  font-size:20px;
  font-weight:800;
  letter-spacing:.3px;
  position:relative; top:8px; z-index:1;
  text-shadow: 0 1px 0 rgba(0,0,0,.30);
}

/* Turni speciali */
.T-GL{ color:var(--T-GL); } .T-AP{ color:var(--T-AP); }

/* === SETTINGS === */
.settingsCard{
  background: linear-gradient(180deg, rgba(12,24,48,.22), rgba(10,20,40,.16)) !important;
  border: 1px solid rgba(255,255,255,.20) !important;
  box-shadow: 0 8px 22px rgba(0,0,0,.20);
  border-radius: 14px; padding:14px; margin-top:10px;
}
.settingsRow{display:grid;grid-template-columns:160px 1fr;gap:8px;align-items:center;margin:8px 0}
.settingsRow label{font-weight:700;color:#eef4ff}
.settingsRow input,.settingsRow select{
  width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.22);
  background: rgba(12,24,48,.20);color:#fff;height:var(--fieldH);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.14);
}
.settingsRow input::placeholder, .orarioArea::placeholder{ color: rgba(255,255,255,.82); }
.settingsRow select:focus, .settingsRow input:focus, .orarioArea:focus{
  outline: none; box-shadow: var(--focus-ring); border-color: rgba(255,255,255,.42) !important;
}

/* === FORMS === */
.thin-sep{height:0;border-top:1px solid rgba(255,255,255,.20);margin:6px 0}
.iconbtn{width:var(--fieldH);height:var(--fieldH);border-radius:10px;padding:0;font-size:20px;display:flex;align-items:center;justify-content:center;border:0;cursor:pointer}
.iconbtn-primary{background:#1976d2;color:#fff}
.iconbtn-primary:hover{ background: color-mix(in oklch, #1976d2 85%, white 15%); }
.iconbtn-danger{background:#b42325;color:#fff}
.iconbtn:active{transform:translateY(1px)}
@media(max-width:560px){ .settingsRow{grid-template-columns:120px 1fr} }

/* Hide topbar in settings quando richiesto */
.hide-topbar .topbar{ display: none !important; }
.hide-topbar main{ margin-top: 8px; }

/* === COLOR PICKER === */
.colorCell{ display:flex; align-items:center; justify-content:center; }
.colorInput{
  -webkit-appearance:none; appearance:none;
  width:var(--fieldH); height:var(--fieldH);
  border:1px solid rgba(255,255,255,.20); border-radius:10px; background:transparent;
}
.colorInput::-webkit-color-swatch-wrapper{ padding:0; }
.colorInput::-webkit-color-swatch{ border:none; border-radius:8px; }
.colorInput::-moz-color-swatch{ border:none; border-radius:8px; }
@media (max-width:560px){ :root{ --fieldH:40px; } }

/* === GRID TURNI === */
.turni-grid{ grid-template-columns: 1fr 64px 1.05fr 52px 44px !important; align-items:center; }
.siglaInput{ width:100%; text-transform:uppercase; text-align:center; letter-spacing:.3px; font-family:var(--font-ui); font-weight:800; }
@media (max-width:560px){
  .turni-grid{ grid-template-columns: 1fr 60px 0.85fr 46px 44px !important; }
}

/* === DATE FIELD === */
.settingsRow input[type="date"]{
  width:95%; min-width:0; font-size:1rem; height:38px; line-height:38px;
  text-align:center; margin:0 auto; display:block; border-radius:10px;
}
@media (max-width:560px){
  .settingsRow input[type="date"]{ width:92%; font-size:1.05rem; height:36px; line-height:36px; }
}

/* === MULTILINE SCHEDULE === */
.orarioArea{
  display:block; width:100%; height:calc(var(--fieldH) + 2px);
  padding:6px 8px; resize:none; line-height:1.08; font-size:0.9rem;
  border:1px solid rgba(255,255,255,.22); border-radius:10px; background: rgba(12,24,48,.20); color:#fff;
  white-space:pre;
}
@media (max-width:560px){ .orarioArea{ font-size:0.86rem; height:calc(var(--fieldH)); } }

/* === TABBAR === */
.tabbar{
  position:fixed; bottom:0; left:0; right:0;
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06)) !important;
  border-top:1px solid rgba(255,255,255,.20);
  display:flex; justify-content:space-around; gap:10px;
  padding:8px 10px calc(8px + env(safe-area-inset-bottom));
  z-index:10;
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);
}
.tab{
  position: relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  flex: 1;
  max-width: var(--tabMaxW);
  min-width: 0;
  height: var(--tabH);
  border-radius:12px;
  background:transparent;
  color: var(--tabColor);
  font-size:12px;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  transition: color .2s ease, transform .06s ease, stroke-width .2s ease, filter .2s ease;
}

.tab::after{ display:none !important; }

.tab > *{ position: relative; z-index: 1; }

/* hover: più bianco, lift e micro pop dell’icona */
@media (hover:hover){
  .tab:hover{
    color: color-mix(in oklch, #fff 98%, transparent);
    transform: translateY(var(--lift));
    filter: brightness(var(--active-bright)) contrast(var(--active-contrast));
  }
  .tab:hover svg{ stroke-width: 2.5; transform: scale(var(--icon-pop)); }
}

/* pressione: accenno verso il basso */
.tab:active{ transform: translateY(var(--press)); }
.tab:focus-visible{ outline: none; box-shadow: var(--focus-ring); }

/* attivo: bianco pieno, leggero contrasto e più spessore */
.tab.active{
  color:#ffffff;
  font-weight:800;
  filter: brightness(1.25) contrast(1.1);
}

/* SVG */
.tab svg{
  width:var(--tabIcon);
  height:var(--tabIcon);
  display:block;
  fill:none;
  stroke:currentColor;
  stroke-width:2.25;
  stroke-linecap:round;
  stroke-linejoin:round;
  transition: stroke-width .2s ease, color .2s ease, transform .12s ease;
}
.tab.active svg{ stroke-width:2.7; }

/* === Version badge === */
.version-label {
  position: fixed;
  bottom: 6px;
  left: 10px;
  font-family: var(--font-ui);
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.03em;
  color: rgba(255,255,255,0.82);
  opacity: 0.9;
  pointer-events: none;
  user-select: none;
  z-index: 9999;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

/* === Reduce motion === */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{ transition: none !important; animation: none !important; }
}

/* === MOBILE “super” (originali) === */
@media (max-width:560px){
  :root{ --navBtnSize: 36px; }  /* bolla frecce più compatta su mobile */

  /* DOW coerenti con grid anche su mobile */
  .weekhead{
    gap:2px;         /* come .grid mobile */
    padding:2px;     /* come .grid mobile */
    margin:4px 0 2px;
  }
  .weekhead div{
    border-radius:10px;      /* come .cell mobile */
    padding:8px 0;
    font-size:.86rem;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.14);
  }

  .grid{ grid-auto-rows:auto; gap:2px; padding:2px; }

  .cell{
    aspect-ratio: 1 / 1;
    min-height: unset;
    height: auto;
    padding: 4px 0;
    border-radius: 10px;
  }

  .num{
    font-size: 15px;
    font-weight: 800;
    left: 8px;
    top: 6px;
  }

  /* Sigla centrata come in origine (niente bottom), con leggero offset verso il basso */
  .sigla{
    position: relative;
    top: 10px;
    left: auto; right: auto; bottom: auto;
    transform: none;
    font-size: 18px;
    letter-spacing: .25px;
  }
}

/* === Touch-first tweaks (quando non esiste hover, rendi la pressione più visibile) === */
@media (hover:none){
  .tab:active{
    filter: brightness(1.22) contrast(1.08);
  }
  .navbtn:active{
    filter: brightness(1.12);
  }
  .cell:active::after{
    opacity:1; transform: scale(1.02);
  }
}

/* === Desktop: celle alte finché c'è spazio === */
@media (min-width: 561px) {
  main {
    padding-bottom: 110px; /* spazio sicuro sopra la tabbar, senza collisioni */
  }

.grid {
  min-height: calc(100vh - 240px);
  height: auto;
  display: grid;
  grid-auto-rows: minmax(100px, 1fr); /* celle più “adulte” */
}

.cell {
  height: 100%;
  min-height: 100px; /* garantisce uniformità anche nei mesi a 6 righe */
}

}

