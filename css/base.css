:root {
  /* =========================
     PALETTE / LAYOUT BASE base.css
     ========================= */

  /* Sfondo app (usato da body) */
  --bg: radial-gradient(circle at top, #fefefe 0%, #e7ecff 40%, #dbe5ff 100%);

  /* Superfici (card, contenitori principali) */
  --surface: rgba(255,255,255,0.88);      /* .calendar-container, .settings-container, .turni-card, ecc. */
  --surface-strong: rgba(255,255,255,0.96);

  /* Bordi / linee di separazione */
  --border: rgba(120,130,170,0.18);

  /* Testo principale / secondario */
  --text: #111827;     /* body, label, titoli secondari, ecc. */
  --subtext: #6b7280;  /* hint, meta, sottotitoli, icone status, ecc. */

  /* Colore accento / azioni principali */
  --accent: #0a84ff;   /* hover, focus, today-border, bottoni, status, ecc. */

  /* Raggi angoli card / componenti principali */
  --radius-xl: 20px;   /* card grandi: .calendar-container, .settings-group-card, .turni-card */
  --radius: 14px;      /* blocchi più piccoli / secondari */

  /* Ombre globali per card / elementi sollevati */
  --shadow-soft: 0 18px 45px rgba(15,23,42,0.18);  /* card principali */
  --shadow-light: 0 10px 26px rgba(15,23,42,0.12); /* celle giorno, elementi minori */

  /* Colori specifici calendario */
  --dow-muted: #6b7280;     /* intestazione giorni settimana (.dow) */
  --weekend: #e25555;       /* sabato/domenica in calendario */
  --today-border: var(--accent); /* bordo giorno corrente */

  /* Colore etichetta versione (in basso a sinistra) */
  --version-color: rgba(15,23,42,0.65);

  /* Distanza standard sopra ai contenitori settings (Impostazioni, Inspag, Riepilogo, ecc.) */
  --settings-top-gap: 4px;

  /* Frecce mese calendario (.nav-btn in components.css, usate anche in Turni) */
  --nav-fg: #111827;

  /* =========================
     TABBAR (MOBILE / DESKTOP)
     ========================= */

  /* Altezza logica tabbar (per padding body su mobile) */
  --tabbar-h: 78px;

  /* Sfondo / bordo tabbar */
  --tabbar-bg: linear-gradient(180deg, rgba(248,250,252,0.4), rgba(255,255,255,0.85));
  --tabbar-border: rgba(148,163,184,0.4);

  /* Dimensioni / stile tab (usati in tabbar.css) */
  --tabH: 54px;
  --tabIcon: 38px;   /* icone tabbar più grandi */
  --tabMaxW: 120px;
  --tabColor: #9ca3af;        /* colore base icone/tab non attive */
  --tabActiveColor: #0a84ff;  /* colore tab attiva */

  /* Effetti interazione tab (hover / active) */
  --active-bright: 1.12;
  --active-contrast: 1.03;
  --icon-pop: 1.08;
  --lift: -1px;
  --press: 1px;
  --focus-ring: 0 0 0 2px rgba(10,132,255,0.4);

  /* =========================
     ICON / CONTROL SIZES
     (cerchi, frecce, status, pallini colore)
     ========================= */

  /* Cerchi bottoni icona:
     - FONT 15/16 come dimensione contenitore frecce/back
       (icone vere gestite sotto) */
  --icon-circle-lg: 48px;  /* frecce mese calendario (.nav-btn, desktop) */
  --icon-circle-lg-mobile: 44px; /* frecce mese calendario (.nav-btn, mobile) */
  --icon-circle-md: 34px;  /* back impostazioni (.settings-back), slot icona stato (.app-status) */
  --icon-circle-sm: 32px;  /* "+" Turni (.icon-circle-btn) */

  /* Pallino colore sigla Turni */
  --color-dot-size: 20px;  /* .turni-color-preview */

  /* Icona omino stato (SVG interno) */
  --status-icon-size: 48px; /* #icoStatus svg */

  /* Frecce mese calendario (icone SVG) */
  --icon-arrow-size: 22px;     /* FONT 15 — dimensione SVG dentro .nav-btn */
  --icon-arrow-stroke: 2.4;
  --color-arrow-month: var(--nav-fg); /* colore frecce mese */

  /* Freccia BACK impostazioni (icone SVG) */
  --icon-back-size: 22px;      /* FONT 16 — dimensione SVG dentro .settings-back */
  --color-back-icon: var(--text); /* colore freccia back */

  /* =========================
     TIPO / TESTI GLOBALI (SCALA BASE)
     ========================= */

  /* Font UI principale (usato da body) */
  --font-ui: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;

  /* Titolo grande di pagina (es: "Turni" in .app-title) */
  --fs-page-title: 34px;
  --fw-page-title: 700;

  /* Sottotitolo di pagina (placeholder futuro, nessuna classe dedicata attuale) */
  --fs-page-subtitle: 14px;

  /* Titoli secondari / barre (es: label impostazioni, intestazioni pannelli come "Turni") */
  --fs-section-title: 24px; /* alias per header calendario di default */

  /* Label di riga (impostazioni, righe elenco, ecc.) */
  --fs-row-label: 15px;
  --fw-row-label: 500;

  /* Testi secondari / summary / hint (es. .settings-hint, descrizioni brevi) */
  --fs-row-subtext: 13px;

  /* Riepilogo a destra nelle righe impostazioni
   (es. "Sistema" nella riga Tema) */
  --fs-settings-summary: 15px;  
  --fw-settings-summary: 400;
  --col-settings-summary: var(--subtext);
  --ls-settings-summary: -0.00em;
  

  /* Testi meta / micro (sigle, orari, badge piccoli) */
  --fs-meta: 12px;

  /* Label tabbar desktop (testo sotto le icone) */
  --fs-tab-label: 11px;

  /* =========================
     TIPO / TOKENS SPECIFICI (MAPPATI AI "FONT N")
     ========================= */

  /* FONT 1 — Titolo grande pagina:
     - .app-title (Turni, Riepilogo, Inserimenti e Pagamenti, Impostazioni)
     - header Impostazioni (id="settingsTitle" anche quando mostra sottovoci)
  */
  --fs-title-lg: 34px;
  --ls-title-lg: -0.035em;        /* desktop */
  --ls-title-lg-mobile: -0.025em; /* mobile */

  /* FONT 2 — Intestazione calendario:
     - .month-label ("Novembre 2025", "2025", "2020 - 2031")
  */
  --fs-cal-header: 24px;

  /* FONT 3 — Giorni settimana calendario:
     - .dow (Lun, Mar, ... Dom)
  */
  --fs-cal-dow-desktop: 13px;
  --fs-cal-dow-mobile: 11px;

  /* Numero giorno nelle celle calendario (grid) */
  --fs-cal-day-desktop: 18px;
  --fs-cal-day-mobile: 14px;

  /* FONT 4 — Celle selezione mesi / anni:
     - .month-cell (Gen, Feb, ...)
     - .year-cell  (2024, 2025, ...)
  */
  --fs-cal-month-cell: 17px;
  --fs-cal-year-cell: 16px;

  /* FONT 5 / 6 — Icona calendario (gestiti in SVG, qui solo token):
     - #calDay   → giorno (es. "24")
     - #calMonth → mese corto (es. "NOV")
  */
  --fs-cal-icon-day: 10px;
  --fs-cal-icon-month: 7px;

  /* FONT 7 — Voci menu principali Impostazioni:
     - .settings-row-label in .view-settings
       (Turni, Indennità, Festività, Tema, Versione, Info)
  */
  --fs-settings-menu-desktop: 18px;
  --fs-settings-menu-mobile: 17px;
  --ls-settings-menu: -0.015em; /* letter-spacing per le voci menu impostazioni */

  /* FONT 8 — Voci secondarie menu:
     - testo interno .settings-choice (Sistema, Chiaro, Scuro)
  */
  --fs-settings-choice: 13px;

  /* FONT 9 — Titolo pannello Turni:
     - .turni-panel-title ("Turni" nella card Turni)
  */
  --fs-turni-panel-title-desktop: 18px;
  --fs-turni-panel-title-mobile: 17px;
  --ls-turni-panel-title: -0.02em;

  /* FONT 10 — Bottoni pillola:
     - .pill-btn (es. "Modifica" nel pannello Turni)
  */
  --fs-pill-btn: 15px;

  /* FONT 11 — Sigla turno nel quadrato:
     - .turno-sigla
  */
  --fs-turni-sigla: 13px;

  /* FONT 12 — Nome turno:
     - .turno-name
  */
  --fs-turni-nome: 13px;

  /* FONT 13 — Orario turno (grigio):
     - .turno-orario
  */
  --fs-turni-orario: 12px;

  /* FONT 14 — Form "Aggiungi turno":
     - .turni-label (etichette)
     - .turni-input (campi testo/ora)
  */
  --fs-turni-form-label: 13px;
  --fs-turni-form-input: 13px;
  --fs-turni-form-hint: 12px;

  /* (FONT 15/16 sono già coperti nelle variabili ICON / CONTROL SIZES in alto) */
}

/* Tema “system” scuro, solo se NON è forzato un tema via data-theme */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: radial-gradient(circle at top, #111827 0%, #020617 55%, #000000 100%);
    --surface: rgba(15,23,42,0.94);
    --surface-strong: rgba(15,23,42,0.98);
    --border: rgba(148,163,184,0.26);
    --text: #e5e7eb;
    --subtext: #9ca3af;
    --accent: #4b8dff;
    --shadow-soft: 0 22px 60px rgba(0,0,0,0.7);
    --shadow-light: 0 16px 40px rgba(0,0,0,0.55);

    --dow-muted: #9ca3af;
    --weekend: #ff8f8f;
    --today-border: var(--accent);
    --version-color: rgba(226,232,240,0.8);

    --nav-fg: #e5e7eb;

    --tabbar-bg: linear-gradient(180deg, rgba(15,23,42,0.3), rgba(15,23,42,0.92));
    --tabbar-border: rgba(30,64,175,0.7);

    --tabColor: #6b7280;
    --tabActiveColor: #4b8dff;

    --color-arrow-month: var(--nav-fg);
    --color-back-icon: var(--text);
  }
}

/* Forzatura tema scuro (imposta data-theme="dark" sul <html>) */
:root[data-theme="dark"] {
  --bg: radial-gradient(circle at top, #111827 0%, #020617 55%, #000000 100%);
  --surface: rgba(15,23,42,0.94);
  --surface-strong: rgba(15,23,42,0.98);
  --border: rgba(148,163,184,0.26);
  --text: #e5e7eb;
  --subtext: #9ca3af;
  --accent: #4b8dff;
  --shadow-soft: 0 22px 60px rgba(0,0,0,0.7);
  --shadow-light: 0 16px 40px rgba(0,0,0,0.55);

  --dow-muted: #9ca3af;
  --weekend: #ff8f8f;
  --today-border: var(--accent);
  --version-color: rgba(226,232,240,0.8);

  --nav-fg: #e5e7eb;

  --tabbar-bg: linear-gradient(180deg, rgba(15,23,42,0.3), rgba(15,23,42,0.92));
  --tabbar-border: rgba(30,64,175,0.7);

  --tabColor: #6b7280;
  --tabActiveColor: #4b8dff;

  --color-arrow-month: var(--nav-fg);
  --color-back-icon: var(--text);
}

/* =========================
   Reset / base
   ========================= */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  overscroll-behavior: none;
  touch-action: manipulation;
  height: 100%;
}

body {
  margin: 0;
  background: var(--bg);
  background-attachment: fixed;
  font-family: var(--font-ui);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
}

/* Shell & viste */

.app-shell {
  max-width: 1120px;
  margin: 0 auto;
}

/* Ogni .view corrisponde a una tab (Calendario, Inspag, Riepilogo, Impostazioni) */
.view {
  display: none;
}

.view.is-active {
  display: block;
}

/* Header stile iOS */

.app-header {
  padding: 10px 6px 14px 6px; /* titolo più giù */
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Titolo principale di pagina */
.app-title {
  margin: 0;
  font-size: var(--fs-title-lg);
  font-weight: var(--fw-page-title);
  letter-spacing: var(--ls-title-lg);
}

/* =========================
   RESPONSIVE GLOBAL
   ========================= */

@media (max-width: 900px) {
  body {
    /* meno padding laterale per dare più larghezza al calendario,
       spazio sotto per la tabbar (usa --tabbar-h) */
    padding: calc(env(safe-area-inset-top) + 26px) 4px calc(10px + env(safe-area-inset-bottom) + var(--tabbar-h));
  }

  .app-header {
    padding: 10px 4px 8px 4px; /* il 3° valore cambia lo spazio tra titolo e frecce mese */
  }

  .app-title {
    font-size: 24px;                /* valore storico mobile */
    font-weight: 600;               /* più leggero rispetto al 700 desktop */
    letter-spacing: var(--ls-title-lg-mobile);
  }
}

@media (min-width: 901px) {
  body {
    padding-bottom: 20px;
  }
}
