:root {
  /* =========================
     PALETTE / LAYOUT BASE base.css
     ========================= */

  /* Sfondo app (usato da body) */
  --bg: radial-gradient(circle at top, #fefefe 0%, #e7ecff 40%, #dbe5ff 100%);

  /* Superfici (card, contenitori principali) */
  --surface: rgba(255,255,255,0.88);      /* .calendar-container, .settings-container, .turni-card, ecc. */
  --surface-strong: rgba(255,255,255,0.96);

  /* Bordi / linee di separazione */
  --border: rgba(120,130,170,0.18);

  /* Testo principale / secondario */
  --text: #111827;     /* body, label, titoli secondari, ecc. */
  --subtext: #6b7280;  /* hint, meta, sottotitoli, icone status, ecc. */

  /* Colore accento / azioni principali */
  --accent: #0a84ff;   /* hover, focus, today-border, bottoni, status, ecc. */

  /* Raggi angoli card / componenti principali */
  --radius-xl: 20px;   /* card grandi: .calendar-container, .settings-group-card, .turni-card */
  --radius: 14px;      /* blocchi più piccoli / secondari */

  /* Ombre globali per card / elementi sollevati */
  --shadow-soft: 0 18px 45px rgba(15,23,42,0.18);  /* card principali */
  --shadow-light: 0 10px 26px rgba(15,23,42,0.12); /* celle giorno, elementi minori */

  /* Colori specifici calendario */
  --dow-muted: #6b7280;     /* intestazione giorni settimana (.dow) */
  --weekend: #e25555;       /* sabato/domenica in calendario */
  --today-border: var(--accent); /* bordo giorno corrente */

  /* Colore etichetta versione (in basso a sinistra) */
  --version-color: rgba(15,23,42,0.65);

  /* Distanza standard sopra ai contenitori settings (Impostazioni, Inspag, Riepilogo, ecc.) */
  --settings-top-gap: 4px;

  /* Frecce mese calendario (.nav-btn in components.css, usate anche in Turni) */
  --nav-fg: #111827;

  /* =========================
     TABBAR (MOBILE / DESKTOP)
     ========================= */

  /* Altezza logica tabbar (per padding body su mobile) */
  --tabbar-h: 78px;

  /* Sfondo / bordo tabbar */
  --tabbar-bg: linear-gradient(180deg, rgba(248,250,252,0.4), rgba(255,255,255,0.85));
  --tabbar-border: rgba(148,163,184,0.4);

  /* Dimensioni / stile tab (usati in tabbar.css) */
  --tabH: 54px;
  --tabIcon: 38px;   /* icone tabbar più grandi */
  --tabMaxW: 120px;
  --tabColor: #9ca3af;        /* colore base icone/tab non attive */
  --tabActiveColor: #0a84ff;  /* colore tab attiva */

  /* Effetti interazione tab (hover / active) */
  --active-bright: 1.12;
  --active-contrast: 1.03;
  --icon-pop: 1.08;
  --lift: -1px;
  --press: 1px;
  --focus-ring: 0 0 0 2px rgba(10,132,255,0.4);

  /* =========================
     TIPO / TESTI GLOBALI
     ========================= */

  /* Font UI principale (usato da body) */
  --font-ui: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;

  /* Titolo grande di pagina (es: "Turni" in .app-title) */
  --fs-page-title: 34px;
  --fw-page-title: 700;

  /* Sottotitolo di pagina (placeholder futuro, nessuna classe dedicata attuale) */
  --fs-page-subtitle: 14px;

  /* Titoli secondari / barre (es: label impostazioni, intestazioni pannelli come "Turni") */
  --fs-section-title: 24px;

  /* Label di riga (impostazioni, righe elenco, ecc.) */
  --fs-row-label: 15px;
  --fw-row-label: 500;

  /* Testi secondari / summary / hint (es. .settings-hint, descrizioni brevi) */
  --fs-row-subtext: 13px;

  /* Testi meta / micro (sigle, orari, badge piccoli) */
  --fs-meta: 12px;

  /* Label tabbar desktop (testo sotto le icone) */
  --fs-tab-label: 11px;
}

/* Tema “system” scuro, solo se NON è forzato un tema via data-theme */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: radial-gradient(circle at top, #111827 0%, #020617 55%, #000000 100%);
    --surface: rgba(15,23,42,0.94);
    --surface-strong: rgba(15,23,42,0.98);
    --border: rgba(148,163,184,0.26);
    --text: #e5e7eb;
    --subtext: #9ca3af;
    --accent: #4b8dff;
    --shadow-soft: 0 22px 60px rgba(0,0,0,0.7);
    --shadow-light: 0 16px 40px rgba(0,0,0,0.55);

    --dow-muted: #9ca3af;
    --weekend: #ff8f8f;
    --today-border: var(--accent);
    --version-color: rgba(226,232,240,0.8);

    --nav-fg: #e5e7eb;

    --tabbar-bg: linear-gradient(180deg, rgba(15,23,42,0.3), rgba(15,23,42,0.92));
    --tabbar-border: rgba(30,64,175,0.7);

    --tabColor: #6b7280;
    --tabActiveColor: #4b8dff;
  }
}

/* Forzatura tema scuro (imposta data-theme="dark" sul <html>) */
:root[data-theme="dark"] {
  --bg: radial-gradient(circle at top, #111827 0%, #020617 55%, #000000 100%);
  --surface: rgba(15,23,42,0.94);
  --surface-strong: rgba(15,23,42,0.98);
  --border: rgba(148,163,184,0.26);
  --text: #e5e7eb;
  --subtext: #9ca3af;
  --accent: #4b8dff;
  --shadow-soft: 0 22px 60px rgba(0,0,0,0.7);
  --shadow-light: 0 16px 40px rgba(0,0,0,0.55);

  --dow-muted: #9ca3af;
  --weekend: #ff8f8f;
  --today-border: var(--accent);
  --version-color: rgba(226,232,240,0.8);

  --nav-fg: #e5e7eb;

  --tabbar-bg: linear-gradient(180deg, rgba(15,23,42,0.3), rgba(15,23,42,0.92));
  --tabbar-border: rgba(30,64,175,0.7);

  --tabColor: #6b7280;
  --tabActiveColor: #4b8dff;
}

/* =========================
   Reset / base
   ========================= */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  overscroll-behavior: none;
  touch-action: manipulation;
  height: 100%;
}

body {
  margin: 0;
  background: var(--bg);
  background-attachment: fixed;
  font-family: var(--font-ui);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
}

/* Shell & viste */

.app-shell {
  max-width: 1120px;
  margin: 0 auto;
}

/* Ogni .view corrisponde a una tab (Calendario, Inspag, Riepilogo, Impostazioni) */
.view {
  display: none;
}

.view.is-active {
  display: block;
}

/* Header stile iOS */

.app-header {
  padding: 10px 6px 14px 6px; /* titolo più giù */
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Titolo principale di pagina */
.app-title {
  margin: 0;
  font-size: var(--fs-page-title);
  font-weight: var(--fw-page-title);
  letter-spacing: -0.035em;
}

/* =========================
   RESPONSIVE GLOBAL
   ========================= */

@media (max-width: 900px) {
  body {
    /* meno padding laterale per dare più larghezza al calendario,
       spazio sotto per la tabbar (usa --tabbar-h) */
    padding: calc(env(safe-area-inset-top) + 26px) 4px calc(10px + env(safe-area-inset-bottom) + var(--tabbar-h));
  }

  .app-header {
    padding: 10px 4px 8px 4px; /* il 3° valore cambia lo spazio tra titolo e frecce mese */
  }

  .app-title {
    font-size: 24px;
    font-weight: 600;
    letter-spacing: -0.025em;
  }
}

@media (min-width: 901px) {
  body {
    padding-bottom: 20px;
  }
}
